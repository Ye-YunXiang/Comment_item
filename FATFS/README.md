# 关于FATFS介绍

> FATFS 是完全考员的FAT文件系统模块，专门为小型的嵌入式系统设计的。
> 完全使用标准C语言编写，有良好的硬件平台独立性。
> 可以轻松的移植到8051、PIC、AVR、SH、Z80、H8、ARM等系列单片机上。
> 支持FATI2、FATI6、FAT32，支持多个存储媒介，有独立的缓冲区。
> 可以对多个文件进行读/写，并特别对8位单片机和16位单片机做了优化。
> 这里可以借鉴：https://zhuanlan.zhihu.com/p/27594211

阅读源码可以按照：integer.h -> diskio.c -> ff.c 的顺序。

- ffconf.h 用于功能配置，通过宏定义实现条件编译，修改相对应的宏实现功能裁剪。如支持中文可以将宏 _CODE_PAGE 的值改为"936"，并把cc936.c文件添加到工程中就行。
- diskio.c 磁盘的IO，包含底层存储介质的操作函数，为半完成状态，要自己补足代码。 主要是各函数里调用用户实现的底层驱动函数，如SPI读写flash操作函数。

## 移植代码

### diskio.c

1. 先定义好各个物理设备的编号：
` #define SPI_FLASH   1  //SPIFLASH的编号 `

2. 传入不同物理设备的哄，分别对应相应设备进行不同的操作：
` #define sFLASH_ID  0XEF4017   //w25164的ID `
